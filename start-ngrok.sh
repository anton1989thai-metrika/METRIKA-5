#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ngrok —Ç—É–Ω–Ω–µ–ª—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Next.js —Å–µ—Ä–≤–µ—Ä–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./start-ngrok.sh [–ø–æ—Ä—Ç]
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 3000

PORT=${1:-3000}

echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é ngrok —Ç—É–Ω–Ω–µ–ª—å –¥–ª—è –ø–æ—Ä—Ç–∞ $PORT..."
echo ""
echo "üìå –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:"
echo "   1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.ngrok.com"
echo "   2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à authtoken"
echo "   3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: ngrok config add-authtoken YOUR_TOKEN"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω –ª–∏ ngrok
if pgrep -x "ngrok" > /dev/null; then
    echo "‚ö†Ô∏è  Ngrok —É–∂–µ –∑–∞–ø—É—â–µ–Ω!"
    echo "üí° –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç—É–Ω–Ω–µ–ª—å"
    echo ""
    echo "üîó –û—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:4040 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–¥—Ä–µ—Å–∞ —Ç—É–Ω–Ω–µ–ª—è"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º ngrok
echo "üåê –°–æ–∑–¥–∞—é —Ç—É–Ω–Ω–µ–ª—å..."
echo "üìä Dashboard: http://127.0.0.1:4040"
echo ""
echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: Ctrl+C"
echo ""

ngrok http $PORT

